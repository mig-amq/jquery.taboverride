/*! taboverride v2.1.0 | https://github.com/wjbryant/taboverride
Copyright (c) 2012 Bill Bryant | http://opensource.org/licenses/mit */
(function(e){"use strict";function t(){return window.TABOVERRIDE=e()}typeof define=="function"&&define.amd?define("taboverride",[],t):t()})(function(){"use strict";var e={},t=window.document,n="	",r=!1,i=!1,s=t.createElement("textarea"),o,u;return e.overrideKeyDown=function(e){e=e||event;var s=e.keyCode,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C="character";if(s!==9&&(s!==13||!r)||e.ctrlKey||e.altKey)return;i=!1,l=this.value,v=this.scrollTop;if(t.selection)c=t.selection.createRange(),y=c.text,h=c.duplicate(),h.moveToElementText(this),h.setEndPoint("EndToEnd",c),g=h.text.length,m=g-y.length,u>1?(p=l.slice(0,m).split(o).length-1,d=y.split(o).length-1):p=d=0;else{if(typeof this.selectionStart!="number")return;m=this.selectionStart,g=this.selectionEnd,y=l.slice(m,g)}if(s===9)a=n,f=a.length,E=0,S=0,x=0,m!==g&&y.indexOf("\n")!==-1?(m===0||l.charAt(m-1)==="\n"?b=m:b=l.lastIndexOf("\n",m-1)+1,g===l.length||l.charAt(g)==="\n"?w=g:(w=l.indexOf("\n",g),w===-1&&(w=l.length)),e.shiftKey?(l.slice(b).indexOf(a)===0&&(b===m?y=y.slice(f):x=f,S=f),this.value=l.slice(0,b)+l.slice(b+x,m)+y.replace(new RegExp("\n"+a,"g"),function(){return E+=1,"\n"})+l.slice(g),c?(c.collapse(),c.moveEnd(C,g-S-E*f-d-p),c.moveStart(C,m-x-p),c.select()):(this.selectionStart=m-x,this.selectionEnd=g-S-E*f)):(E=1,this.value=l.slice(0,b)+a+l.slice(b,m)+y.replace(/\n/g,function(){return E+=1,"\n"+a})+l.slice(g),c?(c.collapse(),c.moveEnd(C,g+E*f-d-p),c.moveStart(C,m+f-p),c.select()):(this.selectionStart=m+f,this.selectionEnd=g+E*f,this.scrollTop=v))):e.shiftKey?l.slice(m-f).indexOf(a)===0&&(this.value=l.slice(0,m-f)+l.slice(m),c?(c.move(C,m-f-p),c.select()):(this.selectionEnd=this.selectionStart=m-f,this.scrollTop=v)):c?(c.text=a,c.select()):(this.value=l.slice(0,m)+a+l.slice(g),this.selectionEnd=this.selectionStart=m+f,this.scrollTop=v);else if(r){if(m===0||l.charAt(m-1)==="\n"){i=!0;return}b=l.lastIndexOf("\n",m-1)+1,w=l.indexOf("\n",m),w===-1&&(w=l.length),T=l.slice(b,w).match(/^[ \t]*/)[0],N=T.length;if(m<b+N){i=!0;return}c?(c.text="\n"+T,c.select()):(this.value=l.slice(0,m)+"\n"+T+l.slice(g),this.selectionEnd=this.selectionStart=m+u+N,this.scrollTop=v)}if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()},e.overrideKeyPress=function(e){e=e||event;var t=e.keyCode;if((t===9||t===13&&r&&!i)&&!e.ctrlKey&&!e.altKey){if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}},e.tabSize=function(e){var t;if(arguments.length){if(!e)n="	";else if(typeof e=="number"&&e>0){n="";for(t=0;t<e;t+=1)n+=" "}return this}return n==="	"?0:n.length},e.autoIndent=function(e){return arguments.length?(r=e?!0:!1,this):r},s.value="\n",o=s.value,u=o.length,s=null,e});
