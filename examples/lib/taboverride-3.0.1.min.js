/*! taboverride v3.0.1 | https://github.com/wjbryant/taboverride
Copyright (c) 2012 Bill Bryant | http://opensource.org/licenses/mit */
(function(e){"use strict";function t(){var t=window.TABOVERRIDE=e();return t}typeof define=="function"&&define.amd?define("taboverride",[],t):t()})(function(){"use strict";var e={},t=window.document,n,r,i,s,o="	",u=!1,a=!1,f=t.createElement("textarea"),l,c;return i=function(e){e=e||event;var n=e.target||e.srcElement,r=e.keyCode,i,s,f,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k="character";if(r!==9&&(r!==13||!u)||e.ctrlKey||e.altKey)return;a=!1,f=n.value,m=n.scrollTop;if(t.selection)h=t.selection.createRange(),b=h.text,p=h.duplicate(),p.moveToElementText(n),p.setEndPoint("EndToEnd",h),y=p.text.length,g=y-b.length,c>1?(d=f.slice(0,g).split(l).length-1,v=b.split(l).length-1):d=v=0;else{if(typeof n.selectionStart!="number")return;g=n.selectionStart,y=n.selectionEnd,b=f.slice(g,y)}if(r===9)i=o,s=i.length,S=0,x=0,T=0,g!==y&&b.indexOf("\n")!==-1?(g===0||f.charAt(g-1)==="\n"?w=g:w=f.lastIndexOf("\n",g-1)+1,y===f.length||f.charAt(y)==="\n"?E=y:(E=f.indexOf("\n",y),E===-1&&(E=f.length)),e.shiftKey?(f.slice(w).indexOf(i)===0&&(w===g?b=b.slice(s):T=s,x=s),n.value=f.slice(0,w)+f.slice(w+T,g)+b.replace(new RegExp("\n"+i,"g"),function(){return S+=1,"\n"})+f.slice(y),h?(h.collapse(),h.moveEnd(k,y-x-S*s-v-d),h.moveStart(k,g-T-d),h.select()):(n.selectionStart=g-T,n.selectionEnd=y-x-S*s)):(S=1,n.value=f.slice(0,w)+i+f.slice(w,g)+b.replace(/\n/g,function(){return S+=1,"\n"+i})+f.slice(y),h?(h.collapse(),h.moveEnd(k,y+S*s-v-d),h.moveStart(k,g+s-d),h.select()):(n.selectionStart=g+s,n.selectionEnd=y+S*s,n.scrollTop=m))):e.shiftKey?f.slice(g-s).indexOf(i)===0&&(n.value=f.slice(0,g-s)+f.slice(g),h?(h.move(k,g-s-d),h.select()):(n.selectionEnd=n.selectionStart=g-s,n.scrollTop=m)):h?(h.text=i,h.select()):(n.value=f.slice(0,g)+i+f.slice(y),n.selectionEnd=n.selectionStart=g+s,n.scrollTop=m);else if(u){if(g===0||f.charAt(g-1)==="\n"){a=!0;return}w=f.lastIndexOf("\n",g-1)+1,E=f.indexOf("\n",g),E===-1&&(E=f.length),N=f.slice(w,E).match(/^[ \t]*/)[0],C=N.length;if(g<w+C){a=!0;return}h?(h.text="\n"+N,h.select()):(n.value=f.slice(0,g)+"\n"+N+f.slice(y),n.selectionEnd=n.selectionStart=g+c+C,n.scrollTop=m)}if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()},s=function(e){e=e||event;var t=e.keyCode;if((t===9||t===13&&u&&!a)&&!e.ctrlKey&&!e.altKey){if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}},t.addEventListener?(n=function(e){r(e),e.addEventListener("keydown",i,!1),e.addEventListener("keypress",s,!1)},r=function(e){e.removeEventListener("keydown",i,!1),e.removeEventListener("keypress",s,!1)}):t.attachEvent?(n=function(e){r(e),e.attachEvent("onkeydown",i),e.attachEvent("onkeypress",s)},r=function(e){e.detachEvent("onkeydown",i),e.detachEvent("onkeypress",s)}):n=r=function(){},e.set=function(e,t){var i,s,o,u,a;if(e){i=arguments.length<2||t?n:r,u=e,o=u.length,typeof o!="number"&&(u=[u],o=1);for(s=0;s<o;s+=1)a=u[s],a&&a.nodeName&&a.nodeName.toLowerCase()==="textarea"&&i(a)}return this},e.tabSize=function(e){var t;if(arguments.length){if(!e)o="	";else if(typeof e=="number"&&e>0){o="";for(t=0;t<e;t+=1)o+=" "}return this}return o==="	"?0:o.length},e.autoIndent=function(e){return arguments.length?(u=e?!0:!1,this):u},f.value="\n",l=f.value,c=l.length,f=null,e});
