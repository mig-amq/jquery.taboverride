/*! taboverride v3.0.0 | https://github.com/wjbryant/taboverride
Copyright (c) 2012 Bill Bryant | http://opensource.org/licenses/mit */
(function(e){"use strict";function t(){var t=window.TABOVERRIDE=e();return t}typeof define=="function"&&define.amd?define("taboverride",[],t):t()})(function(){"use strict";var e={},t=window.document,n,r,i,s,o="	",u=!1,a=!1,f=t.createElement("textarea"),l,c;return i=function(e){e=e||event;var n=e.keyCode,r,i,s,f,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C="character";if(n!==9&&(n!==13||!u)||e.ctrlKey||e.altKey)return;a=!1,s=this.value,v=this.scrollTop;if(t.selection)f=t.selection.createRange(),y=f.text,h=f.duplicate(),h.moveToElementText(this),h.setEndPoint("EndToEnd",f),g=h.text.length,m=g-y.length,c>1?(p=s.slice(0,m).split(l).length-1,d=y.split(l).length-1):p=d=0;else{if(typeof this.selectionStart!="number")return;m=this.selectionStart,g=this.selectionEnd,y=s.slice(m,g)}if(n===9)r=o,i=r.length,E=0,S=0,x=0,m!==g&&y.indexOf("\n")!==-1?(m===0||s.charAt(m-1)==="\n"?b=m:b=s.lastIndexOf("\n",m-1)+1,g===s.length||s.charAt(g)==="\n"?w=g:(w=s.indexOf("\n",g),w===-1&&(w=s.length)),e.shiftKey?(s.slice(b).indexOf(r)===0&&(b===m?y=y.slice(i):x=i,S=i),this.value=s.slice(0,b)+s.slice(b+x,m)+y.replace(new RegExp("\n"+r,"g"),function(){return E+=1,"\n"})+s.slice(g),f?(f.collapse(),f.moveEnd(C,g-S-E*i-d-p),f.moveStart(C,m-x-p),f.select()):(this.selectionStart=m-x,this.selectionEnd=g-S-E*i)):(E=1,this.value=s.slice(0,b)+r+s.slice(b,m)+y.replace(/\n/g,function(){return E+=1,"\n"+r})+s.slice(g),f?(f.collapse(),f.moveEnd(C,g+E*i-d-p),f.moveStart(C,m+i-p),f.select()):(this.selectionStart=m+i,this.selectionEnd=g+E*i,this.scrollTop=v))):e.shiftKey?s.slice(m-i).indexOf(r)===0&&(this.value=s.slice(0,m-i)+s.slice(m),f?(f.move(C,m-i-p),f.select()):(this.selectionEnd=this.selectionStart=m-i,this.scrollTop=v)):f?(f.text=r,f.select()):(this.value=s.slice(0,m)+r+s.slice(g),this.selectionEnd=this.selectionStart=m+i,this.scrollTop=v);else if(u){if(m===0||s.charAt(m-1)==="\n"){a=!0;return}b=s.lastIndexOf("\n",m-1)+1,w=s.indexOf("\n",m),w===-1&&(w=s.length),T=s.slice(b,w).match(/^[ \t]*/)[0],N=T.length;if(m<b+N){a=!0;return}f?(f.text="\n"+T,f.select()):(this.value=s.slice(0,m)+"\n"+T+s.slice(g),this.selectionEnd=this.selectionStart=m+c+N,this.scrollTop=v)}if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()},s=function(e){e=e||event;var t=e.keyCode;if((t===9||t===13&&u&&!a)&&!e.ctrlKey&&!e.altKey){if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}},t.addEventListener?(n=function(e){r(e),e.addEventListener("keydown",i,!1),e.addEventListener("keypress",s,!1)},r=function(e){e.removeEventListener("keydown",i,!1),e.removeEventListener("keypress",s,!1)}):t.attachEvent?(n=function(e){r(e),e.attachEvent("onkeydown",i),e.attachEvent("onkeypress",s)},r=function(e){e.detachEvent("onkeydown",i),e.detachEvent("onkeypress",s)}):n=r=function(){},e.set=function(e,t){var i,s,o,u,a;if(e){i=arguments.length<2||t?n:r,u=e,o=u.length,typeof o!="number"&&(u=[u],o=1);for(s=0;s<o;s+=1)a=u[s],a&&a.nodeName&&a.nodeName.toLowerCase()==="textarea"&&i(a)}return this},e.tabSize=function(e){var t;if(arguments.length){if(!e)o="	";else if(typeof e=="number"&&e>0){o="";for(t=0;t<e;t+=1)o+=" "}return this}return o==="	"?0:o.length},e.autoIndent=function(e){return arguments.length?(u=e?!0:!1,this):u},f.value="\n",l=f.value,c=l.length,f=null,e});
